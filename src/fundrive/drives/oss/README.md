# é˜¿é‡Œäº‘OSSå­˜å‚¨é©±åŠ¨

åŸºäºé˜¿é‡Œäº‘OSS Python SDKå®ç°çš„ç½‘ç›˜é©±åŠ¨ï¼Œæ”¯æŒå®Œæ•´çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œåŠŸèƒ½ã€‚

## ğŸŒŸ å…³äºé˜¿é‡Œäº‘OSS

[é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSS](https://www.aliyun.com/product/oss)ï¼ˆObject Storage Serviceï¼‰æ˜¯é˜¿é‡Œäº‘æä¾›çš„æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚OSSå¯ä»¥é€šè¿‡ç½‘ç»œéšæ—¶å­˜å‚¨å’Œè°ƒç”¨åŒ…æ‹¬æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰åœ¨å†…çš„å„ç§æ–‡ä»¶ã€‚

### ä¸»è¦ç‰¹ç‚¹
- **æµ·é‡å­˜å‚¨ç©ºé—´**ï¼šå‡ ä¹æ— é™çš„å­˜å‚¨å®¹é‡
- **é«˜å¯é æ€§**ï¼š99.9999999999%ï¼ˆ12ä¸ª9ï¼‰çš„æ•°æ®æŒä¹…æ€§
- **é«˜å¯ç”¨æ€§**ï¼š99.995%çš„æœåŠ¡å¯ç”¨æ€§
- **å®‰å…¨é˜²æŠ¤**ï¼šå¤šå±‚æ¬¡å®‰å…¨é˜²æŠ¤ä½“ç³»
- **æˆæœ¬ä¼˜åŒ–**ï¼šæŒ‰é‡ä»˜è´¹ï¼Œå¤šç§å­˜å‚¨ç±»å‹å¯é€‰
- **å…¨çƒåŠ é€Ÿ**ï¼šéå¸ƒå…¨çƒçš„CDNèŠ‚ç‚¹

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### âœ… æ”¯æŒçš„åŠŸèƒ½
- **è®¤è¯ç™»å½•**ï¼šæ”¯æŒAccessKeyè®¤è¯å’Œfunsecreté…ç½®ç®¡ç†
- **æ–‡ä»¶æ“ä½œ**ï¼šä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ã€é‡å‘½åæ–‡ä»¶
- **ç›®å½•ç®¡ç†**ï¼šåˆ›å»ºã€åˆ é™¤ã€åˆ—ä¸¾ç›®å½•
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡ä¸Šä¼ ä¸‹è½½å’Œé€’å½’å¤„ç†
- **æœç´¢åŠŸèƒ½**ï¼šæŒ‰æ–‡ä»¶åå’Œç±»å‹æœç´¢æ–‡ä»¶
- **å¤åˆ¶ç§»åŠ¨**ï¼šæ–‡ä»¶å’Œç›®å½•çš„å¤åˆ¶ã€ç§»åŠ¨æ“ä½œ
- **åˆ†äº«é“¾æ¥**ï¼šç”Ÿæˆé¢„ç­¾åURLå’Œå…¬å…±è®¿é—®é“¾æ¥
- **è¿›åº¦æ˜¾ç¤º**ï¼šå¤§æ–‡ä»¶ä¸Šä¼ ä¸‹è½½è¿›åº¦æ¡æ˜¾ç¤º
- **ç©ºé—´æŸ¥è¯¢**ï¼šè·å–å­˜å‚¨ç©ºé—´ä½¿ç”¨æƒ…å†µ

### âŒ ä¸æ”¯æŒçš„åŠŸèƒ½
- **å›æ”¶ç«™**ï¼šOSSæ²¡æœ‰å›æ”¶ç«™æ¦‚å¿µï¼Œåˆ é™¤å³æ°¸ä¹…åˆ é™¤
- **å¯†ç åˆ†äº«**ï¼šOSSä¸æ”¯æŒå¯†ç ä¿æŠ¤çš„åˆ†äº«é“¾æ¥
- **åˆ†äº«ä¿å­˜**ï¼šæ— æ³•ç›´æ¥ä¿å­˜ä»–äººåˆ†äº«çš„å†…å®¹

## ğŸ“‹ é…ç½®è¦æ±‚

### 1. è·å–é˜¿é‡Œäº‘è®¿é—®å‡­è¯

1. ç™»å½•[é˜¿é‡Œäº‘æ§åˆ¶å°](https://ecs.console.aliyun.com/)
2. è¿›å…¥"è®¿é—®æ§åˆ¶" > "ç”¨æˆ·ç®¡ç†"
3. åˆ›å»ºç”¨æˆ·å¹¶è·å–AccessKey IDå’ŒAccessKey Secret
4. ä¸ºç”¨æˆ·æˆäºˆOSSç›¸å…³æƒé™ï¼ˆå¦‚AliyunOSSFullAccessï¼‰

### 2. åˆ›å»ºOSS Bucket

1. è¿›å…¥[OSSæ§åˆ¶å°](https://oss.console.aliyun.com/)
2. åˆ›å»ºæ–°çš„Bucket
3. è®°å½•Bucketåç§°å’Œè®¿é—®åŸŸåï¼ˆEndpointï¼‰

### 3. é…ç½®è®¿é—®ä¿¡æ¯

ä½¿ç”¨funsecreté…ç½®ç®¡ç†å·¥å…·è®¾ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š

```bash
# è®¾ç½®è®¿é—®å¯†é’¥
funsecret set fundrive oss access_key "your_access_key_id"
funsecret set fundrive oss access_secret "your_access_key_secret"

# è®¾ç½®Bucketä¿¡æ¯
funsecret set fundrive oss bucket_name "your_bucket_name"
funsecret set fundrive oss endpoint "oss-cn-hangzhou.aliyuncs.com"
```

### 4. Endpointè¯´æ˜

ä¸åŒåœ°åŸŸçš„Endpointä¸åŒï¼Œå¸¸ç”¨çš„æœ‰ï¼š
- åä¸œ1ï¼ˆæ­å·ï¼‰ï¼š`oss-cn-hangzhou.aliyuncs.com`
- åä¸œ2ï¼ˆä¸Šæµ·ï¼‰ï¼š`oss-cn-shanghai.aliyuncs.com`
- ååŒ—2ï¼ˆåŒ—äº¬ï¼‰ï¼š`oss-cn-beijing.aliyuncs.com`
- åå—1ï¼ˆæ·±åœ³ï¼‰ï¼š`oss-cn-shenzhen.aliyuncs.com`

å®Œæ•´åˆ—è¡¨è¯·å‚è€ƒï¼š[OSSè®¿é—®åŸŸåå’Œæ•°æ®ä¸­å¿ƒ](https://help.aliyun.com/document_detail/31837.html)

## ğŸ’» ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```python
from fundrive.drives.oss.drive import OSSDrive

# åˆ›å»ºé©±åŠ¨å®ä¾‹
drive = OSSDrive()

# ç™»å½•ï¼ˆä½¿ç”¨funsecreté…ç½®ï¼‰
if drive.login():
    print("ç™»å½•æˆåŠŸï¼")

    # è·å–æ ¹ç›®å½•æ–‡ä»¶åˆ—è¡¨
    files = drive.get_file_list("")
    for file in files:
        print(f"æ–‡ä»¶: {file.name} ({file.size} bytes)")

    # ä¸Šä¼ æ–‡ä»¶
    if drive.upload_file("local_file.txt", "remote_dir"):
        print("ä¸Šä¼ æˆåŠŸï¼")

    # ä¸‹è½½æ–‡ä»¶
    if drive.download_file("remote_dir/local_file.txt", filepath="downloaded_file.txt"):
        print("ä¸‹è½½æˆåŠŸï¼")
```

### æ‰‹åŠ¨é…ç½®ç™»å½•

```python
# ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¼ å…¥é…ç½®ä¿¡æ¯
drive = OSSDrive()
success = drive.login(
    access_key="your_access_key",
    access_secret="your_access_secret", 
    bucket_name="your_bucket",
    endpoint="oss-cn-hangzhou.aliyuncs.com"
)
```

### é«˜çº§åŠŸèƒ½

```python
# æœç´¢æ–‡ä»¶
results = drive.search("test", file_type="image")
for file in results:
    print(f"æ‰¾åˆ°å›¾ç‰‡: {file.name}")

# ç”Ÿæˆåˆ†äº«é“¾æ¥
share_info = drive.share("path/to/file.jpg", expire_days=7)
if share_info:
    print(f"åˆ†äº«é“¾æ¥: {share_info['links'][0]['url']}")

# è·å–ç©ºé—´ä½¿ç”¨æƒ…å†µ
quota = drive.get_quota()
print(f"å·²ç”¨ç©ºé—´: {quota['used_space']} bytes")
print(f"å¯¹è±¡æ•°é‡: {quota['object_count']}")
```

## ğŸ§ª è¿è¡Œç¤ºä¾‹

æœ¬é©±åŠ¨æä¾›äº†å®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œæ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼ï¼š

```bash
# è¿›å…¥é©±åŠ¨ç›®å½•
cd src/fundrive/drives/oss

# ç®€å•ä½¿ç”¨ç¤ºä¾‹ï¼ˆé»˜è®¤ï¼‰
python example.py

# åŸºç¡€åŠŸèƒ½æµ‹è¯•
python example.py --test

# å®Œæ•´åŠŸèƒ½æ¼”ç¤º
python example.py --demo

# ç®€å•ä½¿ç”¨ç¤ºä¾‹
python example.py --simple
```

## ğŸ“š APIæ–‡æ¡£

æœ¬é©±åŠ¨åŸºäºä»¥ä¸‹å®˜æ–¹æ–‡æ¡£å®ç°ï¼š

- [é˜¿é‡Œäº‘OSSå®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/document_detail/32026.html)
- [OSS Python SDKæ–‡æ¡£](https://oss-python-sdk-doc.readthedocs.io/)
- [OSS APIå‚è€ƒ](https://help.aliyun.com/document_detail/31947.html)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æƒé™é…ç½®**ï¼šç¡®ä¿AccessKeyå…·æœ‰è¶³å¤Ÿçš„OSSæ“ä½œæƒé™
2. **ç½‘ç»œè®¿é—®**ï¼šç¡®ä¿ç½‘ç»œå¯ä»¥è®¿é—®OSSæœåŠ¡
3. **è´¹ç”¨æ§åˆ¶**ï¼šOSSæŒ‰ä½¿ç”¨é‡è®¡è´¹ï¼Œæ³¨æ„æ§åˆ¶æˆæœ¬
4. **æ•°æ®å®‰å…¨**ï¼šé‡è¦æ•°æ®è¯·åšå¥½å¤‡ä»½
5. **åˆ é™¤æ“ä½œ**ï¼šOSSæ²¡æœ‰å›æ”¶ç«™ï¼Œåˆ é™¤æ“ä½œä¸å¯æ¢å¤
6. **å¹¶å‘é™åˆ¶**ï¼šæ³¨æ„OSSçš„QPSé™åˆ¶ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„è¯·æ±‚

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: ç™»å½•å¤±è´¥ï¼Œæç¤ºæƒé™é”™è¯¯**
A: æ£€æŸ¥AccessKeyæ˜¯å¦æ­£ç¡®ï¼Œç¡®è®¤ç”¨æˆ·å…·æœ‰OSSæ“ä½œæƒé™

**Q: ä¸Šä¼ æ–‡ä»¶å¤±è´¥**
A: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¡®è®¤Bucketåç§°å’ŒEndpointæ­£ç¡®

**Q: ä¸‹è½½é€Ÿåº¦æ…¢**
A: å¯ä»¥è€ƒè™‘ä½¿ç”¨CDNåŠ é€Ÿæˆ–é€‰æ‹©å°±è¿‘çš„æ•°æ®ä¸­å¿ƒ

**Q: åˆ†äº«é“¾æ¥æ— æ³•è®¿é—®**
A: æ£€æŸ¥Bucketçš„è®¿é—®æƒé™è®¾ç½®ï¼Œç¡®è®¤é“¾æ¥æœªè¿‡æœŸ

### æ—¥å¿—è°ƒè¯•

é©±åŠ¨ä½¿ç”¨funutilæ—¥å¿—ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š

```python
import logging
logging.basicConfig(level=logging.DEBUG)

# ç„¶åè¿è¡Œä½ çš„ä»£ç 
drive = OSSDrive()
drive.login()  # ä¼šè¾“å‡ºè¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé©±åŠ¨ï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ªé¡¹ç›®æ ¹ç›®å½•çš„è®¸å¯è¯åè®®ã€‚
